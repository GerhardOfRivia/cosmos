"use strict";(self.webpackChunkdocs_openc3_com=self.webpackChunkdocs_openc3_com||[]).push([["2669"],{9927:function(e,n,t){t.r(n),t.d(n,{default:()=>p,frontMatter:()=>a,metadata:()=>s,assets:()=>l,toc:()=>c,contentTitle:()=>o});var s=JSON.parse('{"id":"getting-started/cli","title":"Command Line Interface","description":"Using openc3.sh","source":"@site/docs/getting-started/cli.md","sourceDirName":"getting-started","slug":"/getting-started/cli","permalink":"/docs/getting-started/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenC3/cosmos/tree/main/docs.openc3.com/docs/getting-started/cli.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Command Line Interface","description":"Using openc3.sh","sidebar_custom_props":{"myEmoji":"\u2328\uFE0F"}},"sidebar":"defaultSidebar","previous":{"title":"Upgrading","permalink":"/docs/getting-started/upgrading"},"next":{"title":"Code Generators","permalink":"/docs/getting-started/generators"}}'),i=t("5893"),r=t("65");let a={sidebar_position:5,title:"Command Line Interface",description:"Using openc3.sh",sidebar_custom_props:{myEmoji:"\u2328\uFE0F"}},o=void 0,l={},c=[{value:"Rake",id:"rake",level:2},{value:"IRB",id:"irb",level:2},{value:"Script",id:"script",level:2},{value:"List",id:"list",level:3},{value:"Spawn",id:"spawn",level:3},{value:"Run",id:"run",level:3},{value:"Validate",id:"validate",level:2},{value:"Load",id:"load",level:2},{value:"List",id:"list-1",level:2},{value:"Generate",id:"generate",level:2},{value:"Bridge",id:"bridge",level:2},{value:"Pkginstall and pkguninstall",id:"pkginstall-and-pkguninstall",level:2},{value:"Rubysloc (deprecated)",id:"rubysloc-deprecated",level:2},{value:"XTCE Converter",id:"xtce-converter",level:2},{value:"CSTOL Converter",id:"cstol-converter",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The COSMOS Command Line Interface is ",(0,i.jsx)(n.code,{children:"openc3.sh"})," and ",(0,i.jsx)(n.code,{children:"openc3.bat"})," which are included in the COSMOS ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project",children:"project"})," (more about ",(0,i.jsx)(n.a,{href:"key-concepts#projects",children:"projects"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["If you followed the ",(0,i.jsx)(n.a,{href:"/docs/getting-started/installation",children:"Installation Guide"})," you should already be inside a cloned ",(0,i.jsx)(n.a,{href:"https://github.com/OpenC3/cosmos-project",children:"openc3-project"})," which is in your PATH (necessary for openc3.bat / openc3.sh to be resolved). To see all the available type the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli\nUsage:\n  cli help                          # Displays this information\n  cli rake                          # Runs rake in the local directory\n  cli irb                           # Runs irb in the local directory\n  cli script list /PATH SCOPE       # lists script names filtered by path within scope, 'DEFAULT' if not given\n  cli script spawn NAME SCOPE  variable1=value1 variable2=value2  # Starts named script remotely\n  cli script run NAME SCOPE variable1=value1 variable2=value2  # Starts named script, monitoring status on console,  by default until error or exit\n    PARAMETERS name-value pairs to form the script's runtime environment\n    OPTIONS: --wait 0 seconds to monitor status before detaching from the running script; ie --wait 100\n             --disconnect run the script in disconnect mode\n  cli validate /PATH/FILENAME.gem SCOPE variables.txt # Validate a COSMOS plugin gem file\n  cli load /PATH/FILENAME.gem SCOPE variables.txt     # Loads a COSMOS plugin gem file\n  cli list <SCOPE>                  # Lists installed plugins, SCOPE is DEFAULT if not given\n  cli generate TYPE OPTIONS         # Generate various COSMOS entities\n    OPTIONS: --ruby or --python is required to specify the language in the generated code unless OPENC3_LANGUAGE is set\n  cli bridge CONFIG_FILENAME        # Run COSMOS host bridge\n  cli bridgegem gem_name variable1=value1 variable2=value2 # Runs bridge using gem bridge.txt\n  cli bridgesetup CONFIG_FILENAME   # Create a default config file\n  cli pkginstall PKGFILENAME SCOPE  # Install loaded package (Ruby gem or python package)\n  cli pkguninstall PKGFILENAME SCOPE  # Uninstall loaded package (Ruby gem or python package)\n  cli rubysloc                      # DEPRECATED: Please use scc (https://github.com/boyter/scc)\n  cli xtce_converter                # Convert to and from the XTCE format. Run with --help for more info.\n  cli cstol_converter               # Converts CSTOL files (.prc) to COSMOS. Run with --help for more info.\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"seccomp profile",type:"note",children:(0,i.jsxs)(n.p,{children:["You can safely ignore ",(0,i.jsx)(n.code,{children:"WARNING: daemon is not using the default seccomp profile"})]})}),"\n",(0,i.jsx)(n.h2,{id:"rake",children:"Rake"}),"\n",(0,i.jsxs)(n.p,{children:["You can execute rake tasks using ",(0,i.jsx)(n.code,{children:"openc3.sh cli rake"}),". The most typical usage is to generate a plugin and then build it. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli rake build VERSION=1.0.0\n"})}),"\n",(0,i.jsx)(n.h2,{id:"irb",children:"IRB"}),"\n",(0,i.jsxs)(n.p,{children:["IRB stands for Interactive Ruby and is a way to start a Ruby interpreter that you can play around with. When using it from the CLI, it includes the COSMOS Ruby path so you can ",(0,i.jsx)(n.code,{children:"require 'cosmos'"})," and try out various methods. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'% openc3.sh cli irb\nirb(main):001:0> require \'cosmos\'\n=> true\nirb(main):002:0> Cosmos::Api::WHITELIST\n=>\n["get_interface",\n "get_interface_names",\n ...\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"script",children:"Script"}),"\n",(0,i.jsx)(n.p,{children:"The script methods allow you to list the available scripts, spawn a script, and run a script while monitoring its output. Note that you must set the OPENC3_API_PASSWORD in Open Source and both the OPENC3_API_USER and OPENC3_API_PASSWORD in Enterprise."}),"\n",(0,i.jsx)(n.h3,{id:"list",children:"List"}),"\n",(0,i.jsx)(n.p,{children:"List all the available scripts which includes all the files in every target directory. You can filter this list using bash to only include procedures, Ruby files, Python files, etc."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% export OPENC3_API_USER=operator\n% export OPENC3_API_PASSWORD=operator\n% openc3.sh cli script list\nEXAMPLE/cmd_tlm/example_cmds.txt\nEXAMPLE/cmd_tlm/example_tlm.txt\n...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"spawn",children:"Spawn"}),"\n",(0,i.jsxs)(n.p,{children:["The ID of the spawned script is returned. You can connect to it in Script Runner by visiting ",(0,i.jsx)(n.code,{children:"http://localhost:2900/tools/scriptrunner/1"})," where the final value is the ID."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh spawn INST/procedures/checks.rb\n1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run",children:"Run"}),"\n",(0,i.jsx)(n.p,{children:"Run spawns the script and then captures the output and prints it to the shell. Note that this will not work with user input prompts so the script must be written to prevent user input. You can also pass variables to the script as shown in the CLI help."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'% openc3.sh cli script run INST/procedures/stash.rb\nFilename INST/procedures/stash.rb scope DEFAULT\n2025/03/22 19:50:40.429 (SCRIPTRUNNER): Script config/DEFAULT/targets/INST/procedures/stash.rb spawned in 0.796683293 seconds <ruby 3.2.6>\n2025/03/22 19:50:40.453 (SCRIPTRUNNER): Starting script: stash.rb, line_delay = 0.1\nAt [INST/procedures/stash.rb:3] state [running]\nAt [INST/procedures/stash.rb:4] state [running]\n2025/03/22 19:50:40.732 (stash.rb:4): key1: val1\nAt [INST/procedures/stash.rb:5] state [running]\nAt [INST/procedures/stash.rb:6] state [running]\n2025/03/22 19:50:40.936 (stash.rb:6): key2: val2\nAt [INST/procedures/stash.rb:7] state [running]\n2025/03/22 19:50:41.039 (stash.rb:7): CHECK: \'val1\' == \'val1\' is TRUE\nAt [INST/procedures/stash.rb:8] state [running]\n2025/03/22 19:50:41.146 (stash.rb:8): CHECK: \'val2\' == \'val2\' is TRUE\nAt [INST/procedures/stash.rb:9] state [running]\n2025/03/22 19:50:41.256 (stash.rb:9): CHECK: \'["key1", "key2"]\' == \'["key1", "key2"]\' is TRUE\nAt [INST/procedures/stash.rb:10] state [running]\nAt [INST/procedures/stash.rb:11] state [running]\nAt [INST/procedures/stash.rb:12] state [running]\n2025/03/22 19:50:41.556 (stash.rb:12): CHECK: \'{"key1"=>1, "key2"=>2}\' == \'{"key1"=>1, "key2"=>2}\' is TRUE\nAt [INST/procedures/stash.rb:13] state [running]\nAt [INST/procedures/stash.rb:14] state [running]\n2025/03/22 19:50:41.763 (stash.rb:14): CHECK: true == true is TRUE\nAt [INST/procedures/stash.rb:15] state [running]\nAt [INST/procedures/stash.rb:16] state [running]\nAt [INST/procedures/stash.rb:17] state [running]\nAt [INST/procedures/stash.rb:18] state [running]\n2025/03/22 19:50:42.176 (stash.rb:18): CHECK: \'[1, 2, [3, 4]]\' == \'[1, 2, [3, 4]]\' is TRUE\nAt [INST/procedures/stash.rb:19] state [running]\nAt [INST/procedures/stash.rb:21] state [running]\nAt [INST/procedures/stash.rb:22] state [running]\nAt [INST/procedures/stash.rb:23] state [running]\n2025/03/22 19:50:42.587 (stash.rb:23): CHECK: \'{"one"=>1, "two"=>2, "string"=>"string"}\' == \'{"one"=>1, "two"=>2, "string"=>"string"}\' is TRUE\nAt [INST/procedures/stash.rb:24] state [running]\n2025/03/22 19:50:42.697 (SCRIPTRUNNER): Script completed: stash.rb\nAt [INST/procedures/stash.rb:0] state [stopped]\nscript complete\n%\n'})}),"\n",(0,i.jsx)(n.h2,{id:"validate",children:"Validate"}),"\n",(0,i.jsx)(n.p,{children:"Validate is used to validate built COSMOS plugins. It walks through the installation process without actually installing the plugin."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli validate openc3-cosmos-test-1.0.0.gem\nInstalling openc3-cosmos-test-1.0.0.gem\nSuccessfully validated openc3-cosmos-test-1.0.0.gem\n"})}),"\n",(0,i.jsx)(n.h2,{id:"load",children:"Load"}),"\n",(0,i.jsx)(n.p,{children:"Load can load a plugin into COSMOS without using the GUI. This is useful for scripts or CI/CD pipelines."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli load openc3-cosmos-test-1.0.0.gem\nInstalling openc3-cosmos-test-1.0.0.gem\nSuccessfully installed openc3-cosmos-test-1.0.0.gem\n"})}),"\n",(0,i.jsx)(n.h2,{id:"list-1",children:"List"}),"\n",(0,i.jsx)(n.p,{children:"List displays all the installed plugins."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli load openc3-cosmos-test-1.0.0.gem\nInstalling openc3-cosmos-test-1.0.0.gem\nSuccessfully installed openc3-cosmos-test-1.0.0.gem\n"})}),"\n",(0,i.jsx)(n.h2,{id:"generate",children:"Generate"}),"\n",(0,i.jsxs)(n.p,{children:["Generate is used to scaffold new COSMOS plugins, targets, conversions, and more! See the ",(0,i.jsx)(n.a,{href:"/docs/getting-started/generators",children:"Generators"})," page for more information."]}),"\n",(0,i.jsx)(n.h2,{id:"bridge",children:"Bridge"}),"\n",(0,i.jsxs)(n.p,{children:["A COSMOS Bridge is a small application that is run on the local computer to connect to hardware not available to Docker containers. A good example is connecting to a serial port on a non-linux system. See the\n",(0,i.jsx)(n.a,{href:"/docs/guides/bridges",children:"Bridge Guide"})," for more information."]}),"\n",(0,i.jsx)(n.h2,{id:"pkginstall-and-pkguninstall",children:"Pkginstall and pkguninstall"}),"\n",(0,i.jsx)(n.p,{children:"Allows you to install or remove Ruby gems or Python wheels into COSMOS. These are dependencies that are not packaged with the COSMOS plugin itself."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli pkginstall local_gem.gem\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rubysloc-deprecated",children:"Rubysloc (deprecated)"}),"\n",(0,i.jsxs)(n.p,{children:["Calculates the Ruby Source Lines of Code (SLOC) from the current directory recursively. We recommend using ",(0,i.jsx)(n.a,{href:"https://github.com/boyter/scc",children:"scc"})," as it works across any programming language, calculates many more statistics, and is blazing fast."]}),"\n",(0,i.jsx)(n.h2,{id:"xtce-converter",children:"XTCE Converter"}),"\n",(0,i.jsx)(n.p,{children:"Converts from the XTCE format to the COSMOS format and also exports XTCE files given a COSMOS plugin."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli xtce_converter\nUsage: xtce_converter [options] --import input_xtce_filename --output output_dir\n       xtce_converter [options] --plugin /PATH/FILENAME.gem --output output_dir --variables variables.txt\n\n    -h, --help                       Show this message\n    -i, --import VALUE               Import the specified .xtce file\n    -o, --output DIRECTORY           Create files in the directory\n    -p, --plugin PLUGIN              Export .xtce file(s) from the plugin\n    -v, --variables                  Optional variables file to pass to the plugin\n"})}),"\n",(0,i.jsx)(n.h2,{id:"cstol-converter",children:"CSTOL Converter"}),"\n",(0,i.jsx)(n.p,{children:"Converts from the Colorado System Test and Operations Language (CSTOL) to a COSMOS Script Runner Ruby script. It currently does not support conversion to Python. Simply run it in the same directory as CSTOL files (*.prc) and it will convert them all."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"% openc3.sh cli cstol_converter\n"})})]})}function p(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},65:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return a}});var s=t(7294);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);